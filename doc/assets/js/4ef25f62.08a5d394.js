"use strict";(self.webpackChunkmithril_doc=self.webpackChunkmithril_doc||[]).push([[2156],{3905:(e,t,i)=>{i.d(t,{Zo:()=>h,kt:()=>f});var r=i(67294);function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function l(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)i=a[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)i=a[r],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}var s=r.createContext({}),c=function(e){var t=r.useContext(s),i=t;return e&&(i="function"==typeof e?e(t):o(o({},t),e)),i},h=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var i=e.components,n=e.mdxType,a=e.originalType,s=e.parentName,h=l(e,["components","mdxType","originalType","parentName"]),d=c(i),u=n,f=d["".concat(s,".").concat(u)]||d[u]||p[u]||a;return i?r.createElement(f,o(o({ref:t},h),{},{components:i})):r.createElement(f,o({ref:t},h))}));function f(e,t){var i=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=i.length,o=new Array(a);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:n,o[1]=l;for(var c=2;c<a;c++)o[c]=i[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,i)}u.displayName="MDXCreateElement"},92679:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var r=i(87462),n=(i(67294),i(3905));const a={sidebar_position:4,sidebar_label:"Mithril client"},o="Mithril client node",l={unversionedId:"mithril/mithril-network/client",id:"version-maintained/mithril/mithril-network/client",title:"Mithril client node",description:"The Mithril client node is used to list, show or verify artifacts certified by Mithril certificates:",source:"@site/versioned_docs/version-maintained/mithril/mithril-network/client.md",sourceDirName:"mithril/mithril-network",slug:"/mithril/mithril-network/client",permalink:"/doc/mithril/mithril-network/client",draft:!1,editUrl:"https://github.com/input-output-hk/mithril/edit/main/docs/root/mithril/mithril-network/client.md",tags:[],version:"maintained",sidebarPosition:4,frontMatter:{sidebar_position:4,sidebar_label:"Mithril client"},sidebar:"mithrilSideBar",previous:{title:"Mithril signer",permalink:"/doc/mithril/mithril-network/signer"}},s={},c=[{value:"Wallet restoration",id:"wallet-restoration",level:2},{value:"Certificate chain verification",id:"certificate-chain-verification",level:3},{value:"Snapshot artifacts retrieval",id:"snapshot-artifacts-retrieval",level:3},{value:"Snapshot restoration",id:"snapshot-restoration",level:3},{value:"Mithril stake distribution",id:"mithril-stake-distribution",level:2}],h={toc:c},d="wrapper";function p(e){let{components:t,...i}=e;return(0,n.kt)(d,(0,r.Z)({},h,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"mithril-client-node"},"Mithril client node"),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"The Mithril client node is used to list, show or verify artifacts certified by Mithril certificates:"),(0,n.kt)("ol",{parentName:"admonition"},(0,n.kt)("li",{parentName:"ol"},"Cardano full node snapshots"),(0,n.kt)("li",{parentName:"ol"},"Stake distribution involved in Mithril signatures."))),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("ul",{parentName:"admonition"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"For more information about the Mithril protocol, see the ",(0,n.kt)("a",{parentName:"p",href:"/doc/mithril/mithril-protocol/protocol"},"protocol in depth")," overview.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"For more information about the Mithril client, see the ",(0,n.kt)("a",{parentName:"p",href:"/doc/manual/developer-docs/nodes/mithril-client"},"developer manual"),".")))),(0,n.kt)("h2",{id:"wallet-restoration"},"Wallet restoration"),(0,n.kt)("p",null,"A Mithril client can be used by anyone who needs to rapidly restore and bootstrap a Cardano full node:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"A full-node wallet such as Daedalus"),(0,n.kt)("li",{parentName:"ul"},"A node operator (SPO, exchange, DApp).")),(0,n.kt)("p",null,"In the long run, the Mithril client will be incorporated in light clients and wallets."),(0,n.kt)("h3",{id:"certificate-chain-verification"},"Certificate chain verification"),(0,n.kt)("p",null,"The initial action of the Mithril client involves downloading the corresponding certificate chain. For each Mithril certificate, the client proceeds to verify the following:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"The certificate has not been tampered with (by computing its hash and verifying that it is the same as the one used for downloading it)"),(0,n.kt)("li",{parentName:"ol"},"The locally computed message is the same as in the certificate"),(0,n.kt)("li",{parentName:"ol"},"The multi-signature of the certificate is valid and computed with the certificate message"),(0,n.kt)("li",{parentName:"ol"},"The stake distribution used to compute the multi-signature is signed:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"By a multi-signature of a previous certificate of the chain (if there is one available)"),(0,n.kt)("li",{parentName:"ul"},"Or by a valid genesis certificate (in case this is the first certificate of the chain).")))),(0,n.kt)("p",null,"The Mithril aggregator is used as a provider for the certificate chain."),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"For more information about the Mithril certificate chain, see the ",(0,n.kt)("a",{parentName:"p",href:"/doc/mithril/mithril-protocol/certificates"},"certificate chain")," overview.")),(0,n.kt)("h3",{id:"snapshot-artifacts-retrieval"},"Snapshot artifacts retrieval"),(0,n.kt)("p",null,"Once the certificate chain is verified, the Mithril client will try to download a full Cardano node snapshot. The Mithril aggregator is used as a provider for the snapshot locations. The snapshots might be stored at several locations, the client will try the given locations until it finds one that responds well. "),(0,n.kt)("p",null,"These artifacts are downloaded locally in a temporary directory and then uncompressed in the location given on the command line. The uncompressed files are used to compute the message that is then compared with the one that is signed by the Mithril signers. If the verification fails, the uncompressed files are removed from the disk."),(0,n.kt)("h3",{id:"snapshot-restoration"},"Snapshot restoration"),(0,n.kt)("p",null,"If the verification succeeds, the user can use these files to start a Cardano full node. At this point, the Cardano node will take over and start adding new blocks to the ledger."),(0,n.kt)("h2",{id:"mithril-stake-distribution"},"Mithril stake distribution"),(0,n.kt)("p",null,"The client can be also used to verify and download the stake distribution used for signatures at the upcoming Cardano's epoch. As with snapshots, the certificate chain is validated, then the signers' verification keys are checked. If valid, a fingerprint of the stake distribution is computed and tested against the one used by the certificate. If it is different, the verification stops. Otherwise, the JSON representation of the stake distribution is saved on disk for further use."))}p.isMDXComponent=!0}}]);